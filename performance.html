<!DOCTYPE html>
<html>
<head>
  <title>Gym Tracker Performance</title>
</head>
<body>
  <h1>Record Your Performance</h1>
  <form id="performance-form">
    <label>Workout:</label>
    <input type="text" id="workout" required><br>
    <label>Duration (minutes):</label>
    <input type="number" id="duration" required><br>
    <button type="submit">Save Performance</button>
  </form>
  <h2>Your Performance</h2>
  <ul id="performance-list"></ul>
  <script>
    document.getElementById('performance-form').addEventListener('submit', async function(event) {
      event.preventDefault();
      const token = localStorage.getItem('token');
      const workout = document.getElementById('workout').value;
      const duration = document.getElementById('duration').value;
      await fetch('/performance', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ token, workout, duration })
      });
      alert('Performance saved!');
      loadPerformance();
    });

    async function loadPerformance() {
      const token = localStorage.getItem('token');
      const response = await fetch(`/performance?token=${token}`);
      const performances = await response.json();
      const list = document.getElementById('performance-list');
      list.innerHTML = '';
      performances.forEach(p => {
        const item = document.createElement('li');
        item.textContent = `${p.workout} - ${p.duration} minutes`;
        list.appendChild(item);
      });
    }

    // Load performance data on page load
    loadPerformance();
  </script>
</body>
</html>
